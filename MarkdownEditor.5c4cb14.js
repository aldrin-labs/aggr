import{G as e,H as a,J as t,M as i,N as o,aw as s,_ as n,ax as l,L as r,n as u}from"./index.5c4cb14.js";import{m as d}from"./marked.esm.5c4cb14.js";const c=u(e({__name:"MarkdownEditor",props:{value:{type:String,default:""},autofocus:{type:Boolean,default:!1},showPreview:{type:Boolean,default:!1}},emits:["input"],setup(e,{expose:u,emit:c}){const v=e,m=a(null),p=a(!1),w=a(!0),_=a(null),f=t((()=>d(v.value)));i((()=>v.value),(e=>{_.value&&e!==_.value.getValue()&&_.value.setValue(e)})),i((()=>v.showPreview),(async()=>{await h()})),o((async()=>{await g()})),s((()=>{var e;null==(e=_.value)||e.dispose()}));const g=async()=>{w.value=!0;try{const{default:e}=await n((()=>import("./editor.5c4cb142.js").then((e=>e.a))),["editor.5c4cb142.js","index.5c4cb14.js","index.5c4cb14.css","options.5c4cb14.js","editor.5c4cb142.css"]);p.value=!0,await l(),L(e),await l()}catch(e){}finally{w.value=!1}},h=async()=>{_.value&&(_.value.layout({width:0,height:0}),await l(),_.value.layout())},y=()=>({padding:{top:8,bottom:8},value:v.value,tabSize:2,insertSpaces:!0,fontSize:12,lineNumbers:"off",overviewRulerLanes:0,overviewRulerBorder:!1,contextmenu:!1,theme:"aggr",minimap:{enabled:!1},glyphMargin:!1,folding:!1,lineNumbersMinChars:3,scrollbar:{vertical:"visible"},renderLineHighlight:"none",renderLineHighlightOnlyWhenFocus:!0,renderValidationDecorations:"off",renderWhitespace:"none",rulers:[],language:"markdown"}),L=async e=>{if(_.value=e.create(m.value,y()),_.value.onDidChangeModelContent((()=>{c("input",_.value.getValue())})),v.autofocus){await l(),_.value.focus();const e=_.value.getModel(),a=e.getLineCount(),t=e.getLineMaxColumn(a);_.value.setPosition({lineNumber:a,column:t})}await l(),_.value.layout()};return u({resize:h}),{__sfc:!0,props:v,emit:c,editorElement:m,isLoaded:p,isLoading:w,editorInstance:_,preview:f,loadMonaco:g,resize:h,getDefaultOptions:y,createEditor:L,Loader:r}}}),(function(){var e=this,a=e._self._c,t=e._self._setupProxy;return a("div",{staticClass:"markdown-editor form-control",class:[t.isLoading&&"shimmer"]},[t.isLoading?a(t.Loader,{staticClass:"markdown-editor__loader",attrs:{small:""}}):e._e(),t.isLoaded?[a("div",{ref:"editorElement",staticClass:"markdown-editor__monaco"}),e.showPreview?[a("div",{staticClass:"markdown-editor__divider"}),a("div",{staticClass:"markdown-editor__preview marked",domProps:{innerHTML:e._s(t.preview)}})]:e._e()]:e._e()],2)}),[],!1,null,"2a70beb2",null,null).exports;export{c as default};
